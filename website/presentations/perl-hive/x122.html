<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Use Case:  Replacing An Existing Reporting System</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="      Stirring the Hive with a Perl Stick
    "
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Building HiveQL Queries: A Brief Note"
HREF="x114.html"><LINK
REL="NEXT"
TITLE="So How Can Hive Help?"
HREF="x145.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Stirring the Hive with a Perl Stick</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x114.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x145.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN122"
>8. Use Case:  Replacing An Existing Reporting System</A
></H1
><P
>      I work for an advertising network.  Our business is to serve
      ads.  Our clients, advertisers, would like to know which ads and
      campaigns got queries, clicks and conversions, and how much they
      paid.</P
><P
>      We start with web logs which record the details of the queries,
      clicks, and conversions.</P
><P
>      We digested these logs
      into <A
HREF="http://search.cpan.org/~davegmx/DataCube/lib/DataCube.pm"
TARGET="_top"
>DataCube</A
>
      objects, which are
      in-memory <A
HREF="http://en.wikipedia.org/wiki/OLAP_cube"
TARGET="_top"
>OLAP
      cubes</A
>.  An OLAP cube contains a specified set of
      hierarchical dimensions and a specified set of cumulative
      measures (in our case, impressions, clicks, conversions,
      revenue, etc.).</P
><P
>      Each OLAP cube we generated contained a set of dimensions and
      the rolled-up metrics for those dimensions.  Each of these cubes
      was mapped to an autogenerated relational table with fields
      corresponding to those dimensions and metrics.</P
><P
>      For each row of data in the cube, we'd check the contents of the
      relational table to see if there was an existing row for that
      date and the specified values for those dimensions.  If there
      was, we'd update the totals for the measures.  If there wasn't,
      we'd insert a new row.</P
><P
>      The UI presented the contents of the relational tables to the user.</P
><P
>      This approach was reasonable but had issues:</P
><P
></P
><UL
><LI
><P
>	  The update/insert operations were expensive, even when
	  optimized.</P
></LI
><LI
><P
>	  There was a perpetual battle between dimensional richness and
	  cube load times.  We always had to digest away some
	  information.</P
></LI
><LI
><P
>	  Business stakeholders began to ask for more dimensions for
	  use in their analytics, which increased the cube load times
	  further.</P
></LI
><LI
><P
>	  As traffic volume increased, we began to require more than
	  60 minutes to process an hour's worth of data.  That's
	  obviously unsustainable, and led to decreases in dimensional
	  richness and consequent stakeholder disappointment.</P
></LI
><LI
><P
>	  We could have stored raw log data in relational tables and
	  implemented horizontal storage scaling via Greenplum or a
	  similar solution, but they're all very expensive.</P
></LI
></UL
><P
>      Eventually, we ran out of clever ways to improve the code.  We
      needed a new approach.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x114.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x145.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Building HiveQL Queries: A Brief Note</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>So How Can Hive Help?</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>